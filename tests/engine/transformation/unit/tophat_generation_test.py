import pytest

import sio_postdoc.engine.transformation.service as engine


@pytest.mark.parametrize(
    "j, expected",
    [
        (
            2,
            [
                -0.35355339059327373,
                0.35355339059327373,
                0.35355339059327373,
                -0.35355339059327373,
            ],
        ),
        (
            3,
            [-0.25, -0.25, 0.25, 0.25, 0.25, 0.25, -0.25, -0.25],
        ),
        (
            4,
            [
                -0.17677669529663687,
                -0.17677669529663687,
                -0.17677669529663687,
                -0.17677669529663687,
                0.17677669529663687,
                0.17677669529663687,
                0.17677669529663687,
                0.17677669529663687,
                0.17677669529663687,
                0.17677669529663687,
                0.17677669529663687,
                0.17677669529663687,
                -0.17677669529663687,
                -0.17677669529663687,
                -0.17677669529663687,
                -0.17677669529663687,
            ],
        ),
    ],
)
def test_tophat_generation(j, expected):
    result: list[float] = engine._top_hat(j)
    assert result == expected
